{
  "hash": "2831629340f4818f1e9023322bf32735",
  "result": {
    "markdown": "---\ntitle: \"The history of behavioural addictions research (according to PubMed)\"\ndescription: \"\"\nauthor:\n  - name: Rob Heirene\ncategories: [Gambling] \ndate: 2023-08-25\ndraft: true \n---\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Code: set-up\"}\n# Install and load the groundhog package to ensure consistency of the package versions used here:\n# install.packages(\"groundhog\") # Install\n\nlibrary(groundhog) # Load\n\n# List desired packages:\npackages <- c('readr', # Load dataset from GitHib\n              'RCurl', # Load dataset from GitHib\n              'tidyverse', # Clean, organise, and visualise data\n              'plotly', # Add interactive elements to figures\n              'gganimate', # Make animated plots\n              'png',# Helps render gganimate plots\n              'gifski', # Helps render gganimate plots\n              'rmarkdown', # Helps render gganimate plots\n              'Cairo', # Anti-aliasing for the line plots (smoothing output)\n              'ggtext', # make fancy labels in plots\n              'sysfonts', # Special fonts for figures\n              'showtext', # Special fonts for figures\n              'htmlwidgets') # Make plotly plots HTML format for rendering in Quarto\n              \n\n# Load desired package with versions specific to project start date:\ngroundhog.library(packages, \"2023-08-01\") \n\n# Load new font for figures/graphs\nfont_add_google(\"Poppins\", \"Poppins\")\nfont_add_google(\"Reem Kufi\", \"Reem Kufi\")\nshowtext_auto(enable = TRUE) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Code: load dataset\"}\nurl_behav_addic_data_link <- \"https://raw.githubusercontent.com/rheirene/pub-med-scape-behav-addictions/main/Data%20extraction/combined_results_clean.csv\"\n\nraw_data <- read_csv(url_behav_addic_data_link) %>%\n  as_tibble()\n\nstr(raw_data)\n# View(raw_data)\n```\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Code: Animated line graph\"}\n# Prepare data:\ndata_total_per_year_pubs <- raw_data %>%\n   distinct(PMID, .keep_all = TRUE) %>%\n   filter(Year != \"2023\") %>%\n   group_by(Year) %>%\n   count() %>%\n   ungroup() %>%\n  mutate(first_study_1961_label = case_when(Year >= 1961 & Year < 1980 ~ sprintf(\"1961  \\nFirst available study: \\n\\\"Compulsive gambling\\\"\"),\n                               TRUE ~ \"\")) %>%\n  mutate(gam_1980_label = case_when(Year >= 1980 & Year < 1994 ~ sprintf(\"1980  \\nPathological Gambling added \\nto DSM (version III)\"),\n                               TRUE ~ \"\")) %>%\n  mutate(behav_addic_1994_label = case_when(Year >= 1994 & Year < 2004 ~ sprintf(\"1994  \\nFirst mention of \\\"Behavioural \\n addictions\\\" in the literature\"),\n                               TRUE ~ \"\")) %>%\n  mutate(first_gaming_2004_label = case_when(Year >= 2004 & Year < 2013 ~ sprintf(\"1961  \\nFirst available studies \\non gaming addiction\"),\n                               TRUE ~ \"\")) %>%\n  mutate(gam_DSMV_label = case_when(Year >= 2013 & Year < 2021 ~ sprintf(\"2013 \\nInclusion of \\\"Gambling \\ndisorder\\\" as a behavio-\\nural addiction in DSM-V\"),\n                               TRUE ~ \"\"))                     \n                   \n  \ntotal_year_gganimate <- data_total_per_year_pubs %>%\n   ggplot(aes(Year, n)) + \n   geom_point() + \n   geom_line(size = 1.1, color = \"#289998\") + \n  # Add year counting label\n   geom_text(aes(x = 1984, y = 370, label = as.factor(Year)), hjust = 0, vjust = 0, alpha = 0.6, col = \"#F5F7F0\", size = 15, family = \"Reem Kufi\") +\n  # Add 1961 first study label\n  geom_text(aes(x = 1955, y =90, label = first_study_1961_label), hjust = 0, vjust = 0, alpha = 0.9, col = \"#F5F7F0\", size = 4, family = \"Reem Kufi\") +\n  # Add 1980 gambling label\n  geom_text(aes(x = 1970, y =100, label = gam_1980_label), hjust = 0, vjust = 0, alpha = 0.9, col = \"#F5F7F0\", size = 4, family = \"Reem Kufi\") +\n  # Add 1994 behavioural addictions label\n  geom_text(aes(x = 1984, y =110, label = behav_addic_1994_label), hjust = 0, vjust = 0, alpha = 0.9, col = \"#F5F7F0\", size = 4, family = \"Reem Kufi\") +\n   # Add 2013 gambling label\n  # Add 2004 gaming addiction label\n  geom_text(aes(x = 1994, y =150, label = first_gaming_2004_label), hjust = 0, vjust = 0, alpha = 0.9, col = \"#F5F7F0\", size = 4, family = \"Reem Kufi\") +\n   # Add 2013 gambling label\n  geom_text(aes(x = 1999, y =320, label = gam_DSMV_label), hjust = 0, vjust = 0, alpha = 0.9, col = \"#F5F7F0\", size = 4, family = \"Reem Kufi\") +\n# Define x-axis dates\n  scale_x_continuous(breaks = seq(1960, 2020, by = 10)) +  \n   theme(\n     plot.background = element_rect(fill = \"#002B36\",  color = NA), # ADDING THIS NA REMOVES BORDER AROUND PLOT ON WEBSITE\n     panel.background = element_rect(fill = \"#002B36\"),\n     text = element_text(family = \"Reem Kufi\", color = \"#F5F7F0\"),\n     axis.text = element_text(color = \"#F5F7F0\", size = 12),\n     panel.grid = element_blank(),\n     plot.margin = margin(20, 5, 20, 20),\n     axis.title.y = element_blank(),  # Adjust y-axis title position\n     axis.title.x = element_text(margin = margin(t = 15), size = 14),\n     plot.title = element_text(color = \"#F5F7F0\", size = 16, margin = margin(b = 15))\n     # panel.border = element_rect(color = \"#002B36\")\n   ) +\n   labs(\n     title = \"Number of Behavioural Addictions papers published per year on PubMed\",  # Add header\n     subtitle = \"Up to end of 2022\",\n     x = \"Year\"\n   ) +\n   transition_reveal(Year)\n      # view_follow()\n  \nanimate(total_year_gganimate, \n        width = 740, height = 420, \n        rewind = FALSE, \n        type = \"cairo\") # \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.gif){fig-align='center'}\n:::\n:::\n\n\n\n\nNow let's start to look publication rates for each \"addiction\" in our dataset.\n\n------------------------------------------------------------------------\n\n\n```{=html}\n<script src=\"https://giscus.app/client.js\"\n        data-repo=\"rheirene/Quarto_Website\"\n        data-repo-id=\"R_kgDOJ0d4fA\"\n        data-category-id=\"DIC_kwDOJ0d4fM4CXv7I\"\n        data-mapping=\"pathname\"\n        data-strict=\"0\"\n        data-reactions-enabled=\"1\"\n        data-emit-metadata=\"0\"\n        data-input-position=\"bottom\"\n        data-theme=\"dark_dimmed\"\n        data-lang=\"en\"\n        crossorigin=\"anonymous\"\n        async>\n</script\n```\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}